#include <node.h>
#include <nan.h>
#include <glibmm.h>
#include <giomm.h>

#include "attributes.cpp"

using namespace v8;

void Init(Handle<v8::Object> exports) {
    Gio::init();
    
    // attributes module
    Local<v8::Object> attributes = NanNew<v8::Object>();
    
    attributes->Set(
        NanNew<String>("getAttributes"),
        NanNew<FunctionTemplate>(GetAttributes)->GetFunction()
    );
    
    attributes->Set(
        NanNew<String>("getAttribute"),
        NanNew<FunctionTemplate>(GetAttribute)->GetFunction()
    );
    
    attributes->Set(
        NanNew<String>("setAttribute"),
        NanNew<FunctionTemplate>(SetAttribute)->GetFunction()
    );
    
    exports->Set(
        NanNew<String>("attributes"),
        attributes
    );
}

NODE_MODULE(glib, Init)